<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BashSpark: BashSpark</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="bs.svg"/></td>
  <td id="projectalign">
   <div id="projectname">BashSpark
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__2home_2dante_2Documents_2BashSpark_2readme.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">BashSpark</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> BashSpark is inspired by Bash but offers distinct features and behavior.</p>
<p><b>Key Features:</b></p>
<ul>
<li>Supports Bash-style variable syntax:<ul>
<li><code>${VARIABLE_NAME}</code></li>
<li><code>${!VARIABLE_NAME}</code></li>
<li><code>$(command)</code></li>
</ul>
</li>
</ul>
<p><b>Unique Capabilities:</b></p>
<ul>
<li>Interprets escaped characters, such as <code>\n</code> (newline) and <code>\t</code> (tab).</li>
<li>Supports Unicode code points with the following formats:<ul>
<li><code>\x</code> for hexadecimal</li>
<li><code>\u</code> for UTF-16</li>
<li><code>\U</code> for UTF-32</li>
</ul>
</li>
<li>Returns <code>shell_status::SHELL_ERROR_BAD_ENCODING</code> for invalid code points.</li>
</ul>
<p><b>Different behaviour</b></p>
<ul>
<li>Does not require space around '(', '[', '{', '}', ']' and ')'.</li>
<li>Characters '(', '[', '{', '}', ']' and ')' are always interpreted.<ul>
<li>Example: "echo }" works in bash, but not in BashSpark, although "echo \}" works in both.</li>
</ul>
</li>
</ul>
<p><b>Command management</b> Commands are instantiations of class <code><a class="el" href="classbs_1_1command.html" title="Abstract base class for all shell commands.">bs::command</a></code> that are added to the shell. This command management method allow the programmer to strictly control the allowed behaviors, preventing security holes. This enhances the safety and reliability of command execution, ensuring that only authorized commands are executed and that errors are handled gracefully.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Index</h1>
<h1><a class="anchor" id="autotoc_md2"></a>
License</h1>
<p>This file is part of BashSpark. Copyright (C) 2025 Dante Doménech Martínez</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a></p>
<h1><a class="anchor" id="autotoc_md3"></a>
Instructions</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
Usage explanation</h2>
<h3><a class="anchor" id="autotoc_md5"></a>
Create a shell instance</h3>
<p>The first step to run commands is</p>
<h3><a class="anchor" id="autotoc_md6"></a>
Create a shell session</h3>
<p>In order to execute shell commands a shell session is needed. This class is names <code><a class="el" href="classbs_1_1shell__session.html" title="Represents an execution environment for a shell instance.">bs::shell_session</a></code>. The class <code><a class="el" href="classbs_1_1shell__session.html" title="Represents an execution environment for a shell instance.">bs::shell_session</a></code> contains the streams (stdin, stdout, stderr), the environment variables, the function arguments and the local variables. See the documentation on <code><a class="el" href="classbs_1_1shell__session.html" title="Represents an execution environment for a shell instance.">bs::shell_session</a></code> for more details.</p>
<p>Example of shell session directly linked to terminal: </p><div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="comment">// Generate shell</span></div>
<div class="line">std::unique_ptr&lt;bs::shell&gt; pShell = <a class="code hl_function" href="classbs_1_1shell.html#af7bb333ac92bdd0b70fe3da4b22d2bc9">bs::shell::make_default_shell</a>();</div>
<div class="line"><span class="comment">// Instantiare session</span></div>
<div class="line"><a class="code hl_class" href="classbs_1_1shell__session.html">bs::shell_session</a> oSession(</div>
<div class="line">    pShell.get(), <span class="comment">// Owning shell</span></div>
<div class="line">    std::cin, <span class="comment">// stdin</span></div>
<div class="line">    std::cout, <span class="comment">// stdout</span></div>
<div class="line">    std::cerr <span class="comment">// stderr</span></div>
<div class="line">);</div>
<div class="ttc" id="aclassbs_1_1shell__session_html"><div class="ttname"><a href="classbs_1_1shell__session.html">bs::shell_session</a></div><div class="ttdoc">Represents an execution environment for a shell instance.</div><div class="ttdef"><b>Definition</b> shell_session.h:56</div></div>
<div class="ttc" id="aclassbs_1_1shell_html_af7bb333ac92bdd0b70fe3da4b22d2bc9"><div class="ttname"><a href="classbs_1_1shell.html#af7bb333ac92bdd0b70fe3da4b22d2bc9">bs::shell::make_default_shell</a></div><div class="ttdeci">static std::unique_ptr&lt; shell &gt; make_default_shell()</div><div class="ttdoc">Construct bash object.</div><div class="ttdef"><b>Definition</b> shell.cpp:48</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md7"></a>
Create a custom command</h3>
<p>Creating a custom command requires implementing the <code><a class="el" href="classbs_1_1command.html" title="Abstract base class for all shell commands.">bs::command</a></code> interface.</p>
<p>The custom command class has to override the method <code><a class="el" href="classbs_1_1command.html#a62a67df77ffd5e49ef68523bd8c7502a" title="Execute the command.">bs::command::run</a>(const std::span&lt;const std::string&gt; &amp;, shell_session &amp;) const</code>. On success, the <code>run</code> method must return <code><a class="el" href="shell__status_8h.html#aec67bda13c74c2490d11e609fee6f6c9ad060b513ffc577bf5dc16b8c0815f617" title="Indicates successful execution.">bs::shell_status::SHELL_SUCCESS</a></code>. On failure, the <code>run</code> method must return <code>return bs::make_user_code(USER_ERROR_CODE)</code> where <code>USER_ERROR_CODE</code> is an <code>unsigned int</code>.</p>
<p>It is recommended to define supplementary functions to print the error messages. Such functions would have a prototype like: <code>print_error(std::ostream&amp; oStderr) const</code>.</p>
<p>Use the function <code><a class="el" href="classbs_1_1shell.html#af7dc66189775130e13200d68ddb59fd2" title="Sets a command using a unique pointer. Overwrites previous command.">bs::shell::set_command</a>(std::unique_ptr&lt;command&gt; &amp;&amp;)</code> to add the custom commands. The helper template <code>template&lt;typename CommandT, typename... Args&gt; void <a class="el" href="classbs_1_1shell.html#af7dc66189775130e13200d68ddb59fd2" title="Sets a command using a unique pointer. Overwrites previous command.">bs::shell::set_command</a>(Args &amp;&amp;...)</code> may also be usefull.</p>
<p>Example: </p><div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="keyword">class </span>command_helloworld : <span class="keyword">public</span> <a class="code hl_class" href="classbs_1_1command.html">bs::command</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    command_helloworld()</div>
<div class="line">        : bs::command(<span class="stringliteral">&quot;helloworld&quot;</span>) {</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    shell_status run(<span class="keyword">const</span> std::span&lt;const std::string&gt; &amp;vArgs, shell_session &amp;oSession)<span class="keyword"> const override </span>{</div>
<div class="line">        <span class="comment">// Check there are 0 arguments</span></div>
<div class="line">        <span class="keywordflow">if</span> (!vArgs.empty()) {</div>
<div class="line">            <span class="comment">// Call error printing functon</span></div>
<div class="line">            this-&gt;msg_error_param_number(</div>
<div class="line">                oSession.err(), <span class="comment">// stderr</span></div>
<div class="line">                vArgs.size() <span class="comment">// Argument number</span></div>
<div class="line">            );</div>
<div class="line">            <span class="comment">// Return error code 1 (make user code)</span></div>
<div class="line">            <span class="keywordflow">return</span> bs::make_user_code(1);</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// Print &quot;Hello World! on stdout</span></div>
<div class="line">        oSession.out() &lt;&lt; <span class="stringliteral">&quot;Hello World!&quot;</span>;</div>
<div class="line">        <span class="comment">// Return sucess code</span></div>
<div class="line">        <span class="keywordflow">return</span> bs::shell_status::SHELL_SUCCESS;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> msg_error_param_number(std::ostream &amp;oStdErr, <span class="keyword">const</span> std::size_t nArgs)<span class="keyword"> const </span>{</div>
<div class="line">        <span class="comment">// Print error message</span></div>
<div class="line">        oStdErr &lt;&lt; <span class="stringliteral">&quot;helloworld: takes 0 parameters, but received &quot;</span> &lt;&lt; nArgs &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="comment">// The user may implement more complex behaviour such as internationalization</span></div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassbs_1_1command_html"><div class="ttname"><a href="classbs_1_1command.html">bs::command</a></div><div class="ttdoc">Abstract base class for all shell commands.</div><div class="ttdef"><b>Definition</b> command.h:50</div></div>
</div><!-- fragment --><p>Example of adding it to a shell instance: </p><div class="fragment"><div class="line"> ++</div>
<div class="line">std::unique_ptr&lt;bs::shell&gt; pShell = <a class="code hl_function" href="classbs_1_1shell.html#af7bb333ac92bdd0b70fe3da4b22d2bc9">bs::shell::make_default_shell</a>();</div>
<div class="line">pShell-&gt;set_command&lt;command_helloworld&gt;();</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
